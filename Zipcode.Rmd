---
title: "Zipcode Gen"
author: "Derek Slone-Zhen"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(pacman)
```

```{r}
p_load(zipcodeR)
# zip_code_db
real_codes <- with(zip_code_db, zipcode[!is.na(lat)])
length(real_codes)
summary(as.integer(real_codes))
```

```{r}
p_load(tictoc)

tic()
zz <- gzfile("zip-distances.csv.gz", "w")
for (aa in 2:length(real_codes)) {
  dd <- zip_distance(real_codes[aa],real_codes[1:(aa-1)],units="miles")
  write.table(dd, zz, quote=FALSE, row.names = FALSE, col.names = FALSE, sep=',')
  if (aa %% 100 == 0) {
    cat(aa, "\r")
  }
}
close(zz)
toc("Done")

```